{% extends "base.html" %}

{% block content %}
<h1>Admin Dashboard</h1>
<form method="POST" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div>
        {{ form.title.label }} {{ form.title() }}
    </div>
    <div>
        {{ form.description.label }} {{ form.description() }}
    </div>
    <div>
        {{ form.thumbnail.label }} {{ form.thumbnail() }}
    </div>
    <div>
        {{ form.file.label }} {{ form.file() }}
    </div>
    <div>
        {{ form.category.label }} {{ form.category() }}
    </div>
    <div id="shop-fields" style="display: none;">
        {{ form.price.label }} {{ form.price() }}
        {{ form.purchase_link.label }} {{ form.purchase_link() }}
    </div>
    {{ form.submit() }}
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var category = document.getElementById('category');
        var shopFields = document.getElementById('shop-fields');

        function toggleShopFields() {
            if (category.value === 'shop') {
                shopFields.style.display = 'block';
            } else {
                shopFields.style.display = 'none';
            }
        }

        category.addEventListener('change', toggleShopFields);
        toggleShopFields();
    });
</script>
{% endblock %}